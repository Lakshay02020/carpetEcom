<div *ngIf="product" class="product-detail">
  <img src="assests/images/carpet-placeholder.jpg" class="product-image" alt="Carpet Image" />

  <div class="product-info">
    <h2>{{ product.name }}</h2>
    <p><strong>Brand:</strong> {{ product.brand }}</p>
    <p><strong>Category:</strong> {{ product.category }}</p>
    <p><strong>Price:</strong> ‚Çπ{{ product.price }}</p>
    <p><strong>Size:</strong> {{ product.size }}</p>
    <p><strong>Color:</strong> {{ product.color }}</p>
    <p><strong>Description:</strong> {{ product.description || 'No description available.' }}</p>
    <p><strong>In Stock:</strong> {{ product.quantityInStock }}</p>

    <div class="product-actions-detail">
      <ng-container *ngIf="isInCart(product.id); else addToCartBtn">
        <div class="quantity-input styled-quantity">
          <button (click)="decreaseQuantity(product)" class="qty-btn">‚àí</button>
          <span class="qty-label">{{ getCartItemQuantity(product.id) }}</span>
          <button (click)="addToCart(product)" class="qty-btn">+</button>
        </div>
      </ng-container>

      <ng-template #addToCartBtn>
        <button (click)="addToCart(product)" class="add-to-cart-btn">
          Add to Cart üõí
        </button>
      </ng-template>
    </div>
  </div>

  <div class="specs-section">
    <h3>Specifications</h3>
    <table>
      <tr>
        <td><strong>Material:</strong></td>
        <td>Cotton Blend</td>
      </tr>
      <tr>
        <td><strong>Thickness:</strong></td>
        <td>8 mm</td>
      </tr>
      <tr>
        <td><strong>Care:</strong></td>
        <td>Vacuum only / Do not wash</td>
      </tr>
    </table>
  </div>

  <div class="review-section">
    <h3>Customer Reviews</h3>
    <div class="review">
      <p><strong>‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚òÜ</strong> ‚Äì "Very soft and elegant design. Worth the price!"</p>
      <p class="review-author">‚Äì Aarti Sharma</p>
    </div>
  </div>

  <div class="recommendation-section">
    <h3>You may also like</h3>
    <div class="recommendation-grid">
      <div class="recommendation-card" *ngFor="let rec of [1,2,3]">
        <img src="assests/images/carpet-placeholder.jpg" alt="Recommended" />
        <p>Elegant Carpet {{ rec }}</p>
        <p class="price">‚Çπ{{ product.price + (rec * 150) }}</p>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!product">
  <p>Loading product details...</p>
</div>

<!-- Login Popup -->
<div class="popup-overlay" *ngIf="showLoginPopup">
  <div class="popup-content">
    <h3>Login Required</h3>
    <p>Please login to add items to cart.</p>
    <div class="popup-actions">
      <button (click)="closePopup()">Cancel</button>
      <button (click)="goToLogin()">Login Now</button>
    </div>
  </div>
</div>
